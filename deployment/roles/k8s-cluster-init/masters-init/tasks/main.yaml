- name: Creating .kube directory
  ansible.builtin.file:
    path: $HOME/.kube/
    state: directory
    mode: 0755

- name: Configuring users cluster access
  become: yes
  copy:
    src: /etc/kubernetes/admin.conf
    dest: "/home/{{ user }}/.kube/config"
    remote_src: yes
    owner: "{{ user }}"
    mode: 0700

- name: Install pip3 for next task
  become: yes
  ansible.builtin.apt:
    name: python3-pip
    state: present
    update_cache: yes

- name: Install OpenShift for Ansible k8s manipulations
  become: yes
  pip:
    executable: pip3
    name: openshift
    state: present
